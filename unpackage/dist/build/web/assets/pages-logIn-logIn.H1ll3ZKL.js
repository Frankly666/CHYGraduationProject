import{k as e,r as a,c as s,w as l,i as n,o,a as t,l as r,b as u,s as d,m as c,n as i,f as m,I as p,p as f}from"./index-DKAPyHqU.js";import{_ as g}from"./_plugin-vue_export-helper.BCo6x5W8.js";const _=g({__name:"logIn",setup(g){const _=a({username:"",password:""}),w=async()=>{if(_.value.username&&_.value.password)if(_.value.username.length<6||_.value.password.length<6)d({title:"账号和密码长度不能小于6位",icon:"none"});else try{const a=await(async a=>{try{return(await e.callFunction({name:"login",data:{username:a.username,password:a.password}})).result}catch(s){return console.error("调用云函数失败:",s),{code:500,message:"登录失败，请稍后重试"}}})(_.value);200===a.code?(d({title:"登录成功",icon:"success"}),c("username",a.data.username),c("encryptedPassword",a.data.encryptedPassword),c("salt",a.data.salt),c("isLogIn",!0),i({url:"/pages/index/index"})):d({title:a.message||"登录失败",icon:"none"})}catch(a){d({title:"登录失败，请稍后重试",icon:"none"}),console.error("登录失败:",a)}else d({title:"账号和密码不能为空",icon:"none"})};function y(){i({url:"/pages/enroll/enroll"})}return(e,a)=>{const d=m,c=n,i=p,g=f;return o(),s(c,{class:"w3l-workinghny-form"},{default:l((()=>[t(c,{class:"wrapper"},{default:l((()=>[t(c,{class:"logo"},{default:l((()=>[r("h1",null,[t(d,{class:"brand-logo",href:"#"},{default:l((()=>[u(" 教学方案研究生成系统 ")])),_:1})])])),_:1}),t(c,{class:"workinghny-block-grid"},{default:l((()=>[t(c,{class:"workinghny-left-img"},{default:l((()=>[r("img",{src:"/assets/2-WARUgmsW.png",class:"img-responsive",alt:"login visual"})])),_:1}),t(c,{class:"form-right-inf"},{default:l((()=>[t(c,{class:"login-form-content"},{default:l((()=>[t(c,{class:"signin-form"},{default:l((()=>[t(c,{class:"one-frm"},{default:l((()=>[t(c,null,{default:l((()=>[u("账号")])),_:1}),t(i,{type:"text",placeholder:"请输入账号名",modelValue:_.value.username,"onUpdate:modelValue":a[0]||(a[0]=e=>_.value.username=e)},null,8,["modelValue"])])),_:1}),t(c,{class:"one-frm"},{default:l((()=>[t(c,null,{default:l((()=>[u("密码")])),_:1}),t(i,{type:"password",modelValue:_.value.password,"onUpdate:modelValue":a[1]||(a[1]=e=>_.value.password=e),placeholder:"请输入你的密码"},null,8,["modelValue"])])),_:1}),t(g,{type:"submit",class:"btn btn-style mt-3",onClick:w},{default:l((()=>[u(" 登录 ")])),_:1}),r("p",{class:"already"},[u(" 还没有账号? "),r("a",{onClick:y},"注册")])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-ca82d125"]]);export{_ as default};
